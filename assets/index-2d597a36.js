import{r as Z,D as ut,a as x,a4 as lt,j as ne,F as ft}from"./index-f6b06120.js";import{L as ht}from"./index-8df296fc.js";import{S as pt}from"./index-26ef3e6f.js";import{v as Ie}from"./v4-a960c1f4.js";var $e={},gt={get exports(){return $e},set exports(f){$e=f}};(function(f){var r=function(o){var y=Object.prototype,_=y.hasOwnProperty,A=Object.defineProperty||function(t,e,n){t[e]=n.value},l,C=typeof Symbol=="function"?Symbol:{},w=C.iterator||"@@iterator",G=C.asyncIterator||"@@asyncIterator",P=C.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch{p=function(e,n,u){return e[n]=u}}function h(t,e,n,u){var c=e&&e.prototype instanceof M?e:M,T=Object.create(c.prototype),$=new N(u||[]);return A(T,"_invoke",{value:a(t,n,$)}),T}o.wrap=h;function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(u){return{type:"throw",arg:u}}}var s="suspendedStart",S="suspendedYield",v="executing",d="completed",b={};function M(){}function E(){}function O(){}var U={};p(U,w,function(){return this});var k=Object.getPrototypeOf,F=k&&k(k(L([])));F&&F!==y&&_.call(F,w)&&(U=F);var V=O.prototype=M.prototype=Object.create(U);E.prototype=O,A(V,"constructor",{value:O,configurable:!0}),A(O,"constructor",{value:E,configurable:!0}),E.displayName=p(O,P,"GeneratorFunction");function H(t){["next","throw","return"].forEach(function(e){p(t,e,function(n){return this._invoke(e,n)})})}o.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===E||(e.displayName||e.name)==="GeneratorFunction":!1},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,p(t,P,"GeneratorFunction")),t.prototype=Object.create(V),t},o.awrap=function(t){return{__await:t}};function ie(t,e){function n(T,$,z,W){var I=i(t[T],t,$);if(I.type==="throw")W(I.arg);else{var oe=I.arg,ee=oe.value;return ee&&typeof ee=="object"&&_.call(ee,"__await")?e.resolve(ee.__await).then(function(K){n("next",K,z,W)},function(K){n("throw",K,z,W)}):e.resolve(ee).then(function(K){oe.value=K,z(oe)},function(K){return n("throw",K,z,W)})}}var u;function c(T,$){function z(){return new e(function(W,I){n(T,$,W,I)})}return u=u?u.then(z,z):z()}A(this,"_invoke",{value:c})}H(ie.prototype),p(ie.prototype,G,function(){return this}),o.AsyncIterator=ie,o.async=function(t,e,n,u,c){c===void 0&&(c=Promise);var T=new ie(h(t,e,n,u),c);return o.isGeneratorFunction(e)?T:T.next().then(function($){return $.done?$.value:T.next()})};function a(t,e,n){var u=s;return function(T,$){if(u===v)throw new Error("Generator is already running");if(u===d){if(T==="throw")throw $;return D()}for(n.method=T,n.arg=$;;){var z=n.delegate;if(z){var W=m(z,n);if(W){if(W===b)continue;return W}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(u===s)throw u=d,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);u=v;var I=i(t,e,n);if(I.type==="normal"){if(u=n.done?d:S,I.arg===b)continue;return{value:I.arg,done:n.done}}else I.type==="throw"&&(u=d,n.method="throw",n.arg=I.arg)}}}function m(t,e){var n=e.method,u=t.iterator[n];if(u===l)return e.delegate=null,n==="throw"&&t.iterator.return&&(e.method="return",e.arg=l,m(t,e),e.method==="throw")||n!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var c=i(u,t.iterator,e.arg);if(c.type==="throw")return e.method="throw",e.arg=c.arg,e.delegate=null,b;var T=c.arg;if(!T)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b;if(T.done)e[t.resultName]=T.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=l);else return T;return e.delegate=null,b}H(V),p(V,P,"Generator"),p(V,w,function(){return this}),p(V,"toString",function(){return"[object Generator]"});function g(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(g,this),this.reset(!0)}o.keys=function(t){var e=Object(t),n=[];for(var u in e)n.push(u);return n.reverse(),function c(){for(;n.length;){var T=n.pop();if(T in e)return c.value=T,c.done=!1,c}return c.done=!0,c}};function L(t){if(t){var e=t[w];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var n=-1,u=function c(){for(;++n<t.length;)if(_.call(t,n))return c.value=t[n],c.done=!1,c;return c.value=l,c.done=!0,c};return u.next=u}}return{next:D}}o.values=L;function D(){return{value:l,done:!0}}return N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(R),!t)for(var e in this)e.charAt(0)==="t"&&_.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(W,I){return T.type="throw",T.arg=t,e.next=W,I&&(e.method="next",e.arg=l),!!I}for(var u=this.tryEntries.length-1;u>=0;--u){var c=this.tryEntries[u],T=c.completion;if(c.tryLoc==="root")return n("end");if(c.tryLoc<=this.prev){var $=_.call(c,"catchLoc"),z=_.call(c,"finallyLoc");if($&&z){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if($){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else if(z){if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var u=this.tryEntries[n];if(u.tryLoc<=this.prev&&_.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var c=u;break}}c&&(t==="break"||t==="continue")&&c.tryLoc<=e&&e<=c.finallyLoc&&(c=null);var T=c?c.completion:{};return T.type=t,T.arg=e,c?(this.method="next",this.next=c.finallyLoc,b):this.complete(T)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var u=n.completion;if(u.type==="throw"){var c=u.arg;R(n)}return c}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},this.method==="next"&&(this.arg=l),b}},o}(f.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})(gt);var de={},We={},B={};Object.defineProperty(B,"__esModule",{value:!0});B.browserSupportsPolyfills=B.compareTwoStringsUsingDiceCoefficient=B.commandToRegExp=B.concatTranscripts=B.debounce=void 0;var vt=function(r,o,y){var _;return function(){var A=this,l=arguments,C=function(){_=null,y||r.apply(A,l)},w=y&&!_;clearTimeout(_),_=setTimeout(C,o),w&&r.apply(A,l)}};B.debounce=vt;var dt=function(){for(var r=arguments.length,o=new Array(r),y=0;y<r;y++)o[y]=arguments[y];return o.map(function(_){return _.trim()}).join(" ").trim()};B.concatTranscripts=dt;var mt=/\s*\((.*?)\)\s*/g,yt=/(\(\?:[^)]+\))\?/g,bt=/(\(\?)?:\w+/g,St=/\*/g,wt=/[-{}[\]+?.,\\^$|#]/g,_t=function(r){return r instanceof RegExp?new RegExp(r.source,"i"):(r=r.replace(wt,"\\$&").replace(mt,"(?:$1)?").replace(bt,function(o,y){return y?o:"([^\\s]+)"}).replace(St,"(.*?)").replace(yt,"\\s*$1?\\s*"),new RegExp("^"+r+"$","i"))};B.commandToRegExp=_t;var Tt=function(r,o){if(r=r.replace(/\s+/g,"").toLowerCase(),o=o.replace(/\s+/g,"").toLowerCase(),!r.length&&!o.length)return 1;if(!r.length||!o.length)return 0;if(r===o)return 1;if(r.length===1&&o.length===1||r.length<2||o.length<2)return 0;for(var y=new Map,_=0;_<r.length-1;_++){var A=r.substring(_,_+2),l=y.has(A)?y.get(A)+1:1;y.set(A,l)}for(var C=0,w=0;w<o.length-1;w++){var G=o.substring(w,w+2),P=y.has(G)?y.get(G):0;P>0&&(y.set(G,P-1),C++)}return 2*C/(r.length+o.length-2)};B.compareTwoStringsUsingDiceCoefficient=Tt;var Rt=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};B.browserSupportsPolyfills=Rt;var ae={},re={};Object.defineProperty(re,"__esModule",{value:!0});re.APPEND_TRANSCRIPT=re.CLEAR_TRANSCRIPT=void 0;var Ct="CLEAR_TRANSCRIPT";re.CLEAR_TRANSCRIPT=Ct;var Lt="APPEND_TRANSCRIPT";re.APPEND_TRANSCRIPT=Lt;Object.defineProperty(ae,"__esModule",{value:!0});ae.appendTranscript=ae.clearTranscript=void 0;var Be=re,At=function(){return{type:Be.CLEAR_TRANSCRIPT}};ae.clearTranscript=At;var kt=function(r,o){return{type:Be.APPEND_TRANSCRIPT,payload:{interimTranscript:r,finalTranscript:o}}};ae.appendTranscript=kt;var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.transcriptReducer=void 0;var ze=re,Pt=B,Mt=function(r,o){switch(o.type){case ze.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case ze.APPEND_TRANSCRIPT:return{interimTranscript:o.payload.interimTranscript,finalTranscript:(0,Pt.concatTranscripts)(r.finalTranscript,o.payload.finalTranscript)};default:throw new Error}};pe.transcriptReducer=Mt;var Ue={},me={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var r=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};f.default=r})(me);var ye={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=f.isNative=void 0;var r=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),o=function(A){return A===r};f.isNative=o;var y=r;f.default=y})(ye);(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var r=_(me),o=B,y=ye;function _(p){return p&&p.__esModule?p:{default:p}}function A(p,h,i,s,S,v,d){try{var b=p[v](d),M=b.value}catch(E){i(E);return}b.done?h(M):Promise.resolve(M).then(s,S)}function l(p){return function(){var h=this,i=arguments;return new Promise(function(s,S){var v=p.apply(h,i);function d(M){A(v,s,S,d,b,"next",M)}function b(M){A(v,s,S,d,b,"throw",M)}d(void 0)})}}function C(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function w(p,h){for(var i=0;i<h.length;i++){var s=h[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(p,s.key,s)}}function G(p,h,i){return h&&w(p.prototype,h),i&&w(p,i),p}var P=function(){function p(h){C(this,p),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(h),(0,r.default)()&&(this.updateFinalTranscript=(0,o.debounce)(this.updateFinalTranscript,250,!0))}return G(p,[{key:"setSpeechRecognition",value:function(i){var s=!!i&&((0,y.isNative)(i)||(0,o.browserSupportsPolyfills)());s&&(this.disableRecognition(),this.recognition=new i,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(s)}},{key:"subscribe",value:function(i,s){this.subscribers[i]=s}},{key:"unsubscribe",value:function(i){delete this.subscribers[i]}},{key:"emitListeningChange",value:function(i){var s=this;this.listening=i,Object.keys(this.subscribers).forEach(function(S){var v=s.subscribers[S].onListeningChange;v(i)})}},{key:"emitMicrophoneAvailabilityChange",value:function(i){var s=this;this.isMicrophoneAvailable=i,Object.keys(this.subscribers).forEach(function(S){var v=s.subscribers[S].onMicrophoneAvailabilityChange;v(i)})}},{key:"emitTranscriptChange",value:function(i,s){var S=this;Object.keys(this.subscribers).forEach(function(v){var d=S.subscribers[v].onTranscriptChange;d(i,s)})}},{key:"emitClearTranscript",value:function(){var i=this;Object.keys(this.subscribers).forEach(function(s){var S=i.subscribers[s].onClearTranscript;S()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(i){var s=this;Object.keys(this.subscribers).forEach(function(S){var v=s.subscribers[S],d=v.onBrowserSupportsSpeechRecognitionChange,b=v.onBrowserSupportsContinuousListeningChange;d(i),b(i)})}},{key:"disconnect",value:function(i){if(this.recognition&&this.listening)switch(i){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(i){i&&i.error&&i.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(i){var s=i.results,S=i.resultIndex,v=S===void 0?s.length-1:S;this.interimTranscript="",this.finalTranscript="";for(var d=v;d<s.length;++d)s[d].isFinal&&(!(0,r.default)()||s[d][0].confidence>0)?this.updateFinalTranscript(s[d][0].transcript):this.interimTranscript=(0,o.concatTranscripts)(this.interimTranscript,s[d][0].transcript);var b=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(b=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,b||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(i){this.finalTranscript=(0,o.concatTranscripts)(this.finalTranscript,i)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var h=l(regeneratorRuntime.mark(function s(){var S,v,d,b,M,E,O=arguments;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(S=O.length>0&&O[0]!==void 0?O[0]:{},v=S.continuous,d=v===void 0?!1:v,b=S.language,this.recognition){k.next=3;break}return k.abrupt("return");case 3:if(M=d!==this.recognition.continuous,E=b&&b!==this.recognition.lang,!(M||E)){k.next=11;break}if(!this.listening){k.next=9;break}return k.next=9,this.stopListening();case 9:this.recognition.continuous=M?d:this.recognition.continuous,this.recognition.lang=E?b:this.recognition.lang;case 11:if(this.listening){k.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),k.prev=13,k.next=16,this.start();case 16:this.emitListeningChange(!0),k.next=22;break;case 19:k.prev=19,k.t0=k.catch(13),k.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return k.stop()}},s,this,[[13,19]])}));function i(){return h.apply(this,arguments)}return i}()},{key:"abortListening",value:function(){var h=l(regeneratorRuntime.mark(function s(){var S=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),d.next=4,new Promise(function(b){S.onStopListening=b});case 4:case"end":return d.stop()}},s,this)}));function i(){return h.apply(this,arguments)}return i}()},{key:"stopListening",value:function(){var h=l(regeneratorRuntime.mark(function s(){var S=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),d.next=4,new Promise(function(b){S.onStopListening=b});case 4:case"end":return d.stop()}},s,this)}));function i(){return h.apply(this,arguments)}return i}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var h=l(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(this.recognition&&!this.listening)){v.next=4;break}return v.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return v.stop()}},s,this)}));function i(){return h.apply(this,arguments)}return i}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),p}();f.default=P})(Ue);(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=f.useSpeechRecognition=void 0;var r=Z,o=B,y=ae,_=pe,A=w(Ue),l=w(me),C=w(ye);function w(a){return a&&a.__esModule?a:{default:a}}function G(a,m,g,R,N,L,D){try{var t=a[L](D),e=t.value}catch(n){g(n);return}t.done?m(e):Promise.resolve(e).then(R,N)}function P(a){return function(){var m=this,g=arguments;return new Promise(function(R,N){var L=a.apply(m,g);function D(e){G(L,R,N,D,t,"next",e)}function t(e){G(L,R,N,D,t,"throw",e)}D(void 0)})}}function p(a){return s(a)||i(a)||b(a)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(a){if(typeof Symbol<"u"&&Symbol.iterator in Object(a))return Array.from(a)}function s(a){if(Array.isArray(a))return M(a)}function S(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?S=function(g){return typeof g}:S=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},S(a)}function v(a,m){return O(a)||E(a,m)||b(a,m)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(a,m){if(a){if(typeof a=="string")return M(a,m);var g=Object.prototype.toString.call(a).slice(8,-1);if(g==="Object"&&a.constructor&&(g=a.constructor.name),g==="Map"||g==="Set")return Array.from(a);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return M(a,m)}}function M(a,m){(m==null||m>a.length)&&(m=a.length);for(var g=0,R=new Array(m);g<m;g++)R[g]=a[g];return R}function E(a,m){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(a)))){var g=[],R=!0,N=!1,L=void 0;try{for(var D=a[Symbol.iterator](),t;!(R=(t=D.next()).done)&&(g.push(t.value),!(m&&g.length===m));R=!0);}catch(e){N=!0,L=e}finally{try{!R&&D.return!=null&&D.return()}finally{if(N)throw L}}return g}}function O(a){if(Array.isArray(a))return a}var U=!!C.default,k=U&&!(0,l.default)(),F,V=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=m.transcribing,R=g===void 0?!0:g,N=m.clearTranscriptOnListen,L=N===void 0?!0:N,D=m.commands,t=D===void 0?[]:D,e=(0,r.useState)(H.getRecognitionManager()),n=v(e,1),u=n[0],c=(0,r.useState)(U),T=v(c,2),$=T[0],z=T[1],W=(0,r.useState)(k),I=v(W,2),oe=I[0],ee=I[1],K=(0,r.useReducer)(_.transcriptReducer,{interimTranscript:u.interimTranscript,finalTranscript:""}),be=v(K,2),Se=be[0],we=Se.interimTranscript,_e=Se.finalTranscript,Te=be[1],qe=(0,r.useState)(u.listening),Re=v(qe,2),xe=Re[0],He=Re[1],Ye=(0,r.useState)(u.isMicrophoneAvailable),Ce=v(Ye,2),Je=Ce[0],Ke=Ce[1],Le=(0,r.useRef)(t);Le.current=t;var Ae=function(){Te((0,y.clearTranscript)())},se=(0,r.useCallback)(function(){u.resetTranscript(),Ae()},[u]),Qe=function(j,J,te){var X=S(j)==="object"?j.toString():j,ce=X.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),ue=(0,o.compareTwoStringsUsingDiceCoefficient)(ce,J);return ue>=te?{command:j,commandWithoutSpecials:ce,howSimilar:ue,isFuzzyMatch:!0}:null},Ve=function(j,J){var te=(0,o.commandToRegExp)(j),X=te.exec(J);return X?{command:j,parameters:X.slice(1)}:null},ke=(0,r.useCallback)(function(Y,j){Le.current.forEach(function(J){var te=J.command,X=J.callback,ce=J.matchInterim,ue=ce===void 0?!1:ce,Ee=J.isFuzzyMatch,Oe=Ee===void 0?!1:Ee,Ne=J.fuzzyMatchingThreshold,Ze=Ne===void 0?.8:Ne,De=J.bestMatchOnly,et=De===void 0?!1:De,le=!j&&ue?Y.trim():j.trim(),tt=Array.isArray(te)?te:[te],fe=tt.map(function(q){return Oe?Qe(q,le,Ze):Ve(q,le)}).filter(function(q){return q});if(Oe&&et&&fe.length>=2){fe.sort(function(q,ve){return ve.howSimilar-q.howSimilar});var ge=fe[0],nt=ge.command,rt=ge.commandWithoutSpecials,it=ge.howSimilar;X(rt,le,it,{command:nt,resetTranscript:se})}else fe.forEach(function(q){if(q.isFuzzyMatch){var ve=q.command,at=q.commandWithoutSpecials,ot=q.howSimilar;X(at,le,ot,{command:ve,resetTranscript:se})}else{var st=q.command,ct=q.parameters;X.apply(void 0,p(ct).concat([{command:st,resetTranscript:se}]))}})})},[se]),Pe=(0,r.useCallback)(function(Y,j){R&&Te((0,y.appendTranscript)(Y,j)),ke(Y,j)},[ke,R]),Me=(0,r.useCallback)(function(){L&&Ae()},[L]);(0,r.useEffect)(function(){var Y=H.counter;H.counter+=1;var j={onListeningChange:He,onMicrophoneAvailabilityChange:Ke,onTranscriptChange:Pe,onClearTranscript:Me,onBrowserSupportsSpeechRecognitionChange:z,onBrowserSupportsContinuousListeningChange:ee};return u.subscribe(Y,j),function(){u.unsubscribe(Y)}},[R,L,u,Pe,Me]);var Xe=(0,o.concatTranscripts)(_e,we);return{transcript:Xe,interimTranscript:we,finalTranscript:_e,listening:xe,isMicrophoneAvailable:Je,resetTranscript:se,browserSupportsSpeechRecognition:$,browserSupportsContinuousListening:oe}};f.useSpeechRecognition=V;var H={counter:0,applyPolyfill:function(m){F?F.setSpeechRecognition(m):F=new A.default(m);var g=!!m&&(0,o.browserSupportsPolyfills)();U=g,k=g},removePolyfill:function(){F?F.setSpeechRecognition(C.default):F=new A.default(C.default),U=!!C.default,k=U&&!(0,l.default)()},getRecognitionManager:function(){return F||(F=new A.default(C.default)),F},getRecognition:function(){var m=H.getRecognitionManager();return m.getRecognition()},startListening:function(){var a=P(regeneratorRuntime.mark(function g(){var R,N,L,D,t=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return R=t.length>0&&t[0]!==void 0?t[0]:{},N=R.continuous,L=R.language,D=H.getRecognitionManager(),n.next=4,D.startListening({continuous:N,language:L});case 4:case"end":return n.stop()}},g)}));function m(){return a.apply(this,arguments)}return m}(),stopListening:function(){var a=P(regeneratorRuntime.mark(function g(){var R;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return R=H.getRecognitionManager(),L.next=3,R.stopListening();case 3:case"end":return L.stop()}},g)}));function m(){return a.apply(this,arguments)}return m}(),abortListening:function(){var a=P(regeneratorRuntime.mark(function g(){var R;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return R=H.getRecognitionManager(),L.next=3,R.abortListening();case 3:case"end":return L.stop()}},g)}));function m(){return a.apply(this,arguments)}return m}(),browserSupportsSpeechRecognition:function(){return U},browserSupportsContinuousListening:function(){return k}},ie=H;f.default=ie})(We);(function(f){function r(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(w){return typeof w}:r=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},r(l)}Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"useSpeechRecognition",{enumerable:!0,get:function(){return o.useSpeechRecognition}}),f.default=void 0;var o=_(We);function y(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return y=function(){return l},l}function _(l){if(l&&l.__esModule)return l;if(l===null||r(l)!=="object"&&typeof l!="function")return{default:l};var C=y();if(C&&C.has(l))return C.get(l);var w={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in l)if(Object.prototype.hasOwnProperty.call(l,P)){var p=G?Object.getOwnPropertyDescriptor(l,P):null;p&&(p.get||p.set)?Object.defineProperty(w,P,p):w[P]=l[P]}return w.default=l,C&&C.set(l,w),w}var A=o.default;f.default=A})(de);const Ge=ut(de),Et="_page_14sxn_1",Ot="_controls_14sxn_5",Nt="_controls_status_14sxn_14",Dt="_controls_buttons_14sxn_42",It="_words_container_14sxn_49",$t="_words_14sxn_49",zt="_default_text_14sxn_68",Gt="_snack_14sxn_72",Q={page:Et,controls:Ot,controls_status:Nt,controls_buttons:Dt,words_container:It,words:$t,default_text:zt,snack:Gt},jt="_success_btn_1265h_1",Ft="_danger_btn_1265h_1",Wt="_default_btn_1265h_1",Bt="_active_1265h_30",Ut="_select_1265h_38",je={success_btn:jt,danger_btn:Ft,default_btn:Wt,active:Bt,select:Ut},he=({text:f,btnStyle:r,isActive:o,onClick:y})=>{const _=`${je[r]} ${o?je.active:""}`;return x("button",{className:_,type:"button",onClick:()=>y==null?void 0:y(),children:f})},Fe=[{value:"en-US",name:"English(US)"},{value:"zh-CN",name:"中文"},{value:"ja",name:"日本語"}].map(f=>({...f,key:f.value})),Jt=()=>{const f=Z.useRef([]),r=Z.useRef(null),[o,y]=Z.useState([]),[_,A]=Z.useState(!1),[l,C]=Z.useState(!1),[w,G]=Z.useState(Fe[0].value),{enqueueSnackbar:P}=lt(),{resetTranscript:p,listening:h,finalTranscript:i,interimTranscript:s,browserSupportsSpeechRecognition:S}=de.useSpeechRecognition();if(!S)return x("p",{children:"Your browser does not support speech recognition software! Try Chrome desktop, maybe?"});const v=()=>{A(!0),Ge.startListening({continuous:!0,language:w})},d=()=>{A(!1),Ge.stopListening()},b=()=>{y([]),p(),C(!1)},M=()=>{const E=o.map(O=>O.text).join(`
`);navigator.clipboard.writeText(E),P("Copied!",{className:Q.snack,autoHideDuration:2e3,anchorOrigin:{horizontal:"right",vertical:"bottom"},variant:"success"})};return Z.useEffect(()=>{if((s||i)&&C(!0),s){f.current.push(s);const{scrollHeight:E}=r.current;r.current.scrollTop=E}if(!s){const E=f.current.length-1,O=f.current[E];if(!O)return;y(U=>[...U,{id:Ie(),text:O}]),f.current=[]}},[s]),ne(ht,{baseClassName:Q.page,children:[ne("div",{className:Q.controls,children:[ne("div",{className:Q.controls_status,children:[ne("p",{children:["Microphone",x("span",{children:h?"on":"off"})]}),ne("p",{children:["Language",x(pt,{name:"language",selectClass:Q.select,onChange:G,isDisable:_,options:Fe})]})]}),ne("div",{className:Q.controls_buttons,children:[x(he,{btnStyle:"default_btn",text:"Start",isActive:_,onClick:v}),x(he,{btnStyle:"default_btn",text:"Stop",isActive:!_,onClick:d}),x(he,{btnStyle:"success_btn",text:"Copy",onClick:M}),x(he,{btnStyle:"danger_btn",text:"Reset",onClick:b})]})]}),x("div",{className:Q.words_container,ref:r,children:x("div",{className:Q.words,children:l?ne(ft,{children:[o.map(({id:E,text:O})=>x("p",{children:O},E)),x("p",{children:s},Ie())]}):x("p",{className:Q.default_text,children:"尚無內容"})})})]})};export{Jt as default};
