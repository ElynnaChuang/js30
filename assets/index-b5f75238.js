import{r as x,E as ut,a as G,a5 as lt,j as ne,F as ft}from"./index-fdb295de.js";import{v as Ie}from"./v4-a960c1f4.js";var $e={},ht={get exports(){return $e},set exports(l){$e=l}};(function(l){var r=function(i){var p=Object.prototype,S=p.hasOwnProperty,A=Object.defineProperty||function(t,e,n){t[e]=n.value},f,C=typeof Symbol=="function"?Symbol:{},_=C.iterator||"@@iterator",j=C.asyncIterator||"@@asyncIterator",P=C.toStringTag||"@@toStringTag";function g(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{g({},"")}catch{g=function(e,n,u){return e[n]=u}}function h(t,e,n,u){var c=e&&e.prototype instanceof E?e:E,T=Object.create(c.prototype),I=new N(u||[]);return A(T,"_invoke",{value:o(t,n,I)}),T}i.wrap=h;function a(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(u){return{type:"throw",arg:u}}}var s="suspendedStart",w="suspendedYield",d="executing",m="completed",b={};function E(){}function M(){}function O(){}var q={};g(q,_,function(){return this});var k=Object.getPrototypeOf,W=k&&k(k(L([])));W&&W!==p&&S.call(W,_)&&(q=W);var X=O.prototype=E.prototype=Object.create(q);M.prototype=O,A(X,"constructor",{value:O,configurable:!0}),A(O,"constructor",{value:M,configurable:!0}),M.displayName=g(O,P,"GeneratorFunction");function Y(t){["next","throw","return"].forEach(function(e){g(t,e,function(n){return this._invoke(e,n)})})}i.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===M||(e.displayName||e.name)==="GeneratorFunction":!1},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,g(t,P,"GeneratorFunction")),t.prototype=Object.create(X),t},i.awrap=function(t){return{__await:t}};function ie(t,e){function n(T,I,$,B){var z=a(t[T],t,I);if(z.type==="throw")B(z.arg);else{var oe=z.arg,ee=oe.value;return ee&&typeof ee=="object"&&S.call(ee,"__await")?e.resolve(ee.__await).then(function(Q){n("next",Q,$,B)},function(Q){n("throw",Q,$,B)}):e.resolve(ee).then(function(Q){oe.value=Q,$(oe)},function(Q){return n("throw",Q,$,B)})}}var u;function c(T,I){function $(){return new e(function(B,z){n(T,I,B,z)})}return u=u?u.then($,$):$()}A(this,"_invoke",{value:c})}Y(ie.prototype),g(ie.prototype,j,function(){return this}),i.AsyncIterator=ie,i.async=function(t,e,n,u,c){c===void 0&&(c=Promise);var T=new ie(h(t,e,n,u),c);return i.isGeneratorFunction(e)?T:T.next().then(function(I){return I.done?I.value:T.next()})};function o(t,e,n){var u=s;return function(T,I){if(u===d)throw new Error("Generator is already running");if(u===m){if(T==="throw")throw I;return D()}for(n.method=T,n.arg=I;;){var $=n.delegate;if($){var B=y($,n);if(B){if(B===b)continue;return B}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(u===s)throw u=m,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);u=d;var z=a(t,e,n);if(z.type==="normal"){if(u=n.done?m:w,z.arg===b)continue;return{value:z.arg,done:n.done}}else z.type==="throw"&&(u=m,n.method="throw",n.arg=z.arg)}}}function y(t,e){var n=e.method,u=t.iterator[n];if(u===f)return e.delegate=null,n==="throw"&&t.iterator.return&&(e.method="return",e.arg=f,y(t,e),e.method==="throw")||n!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var c=a(u,t.iterator,e.arg);if(c.type==="throw")return e.method="throw",e.arg=c.arg,e.delegate=null,b;var T=c.arg;if(!T)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b;if(T.done)e[t.resultName]=T.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=f);else return T;return e.delegate=null,b}Y(X),g(X,P,"Generator"),g(X,_,function(){return this}),g(X,"toString",function(){return"[object Generator]"});function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}i.keys=function(t){var e=Object(t),n=[];for(var u in e)n.push(u);return n.reverse(),function c(){for(;n.length;){var T=n.pop();if(T in e)return c.value=T,c.done=!1,c}return c.done=!0,c}};function L(t){if(t){var e=t[_];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var n=-1,u=function c(){for(;++n<t.length;)if(S.call(t,n))return c.value=t[n],c.done=!1,c;return c.value=f,c.done=!0,c};return u.next=u}}return{next:D}}i.values=L;function D(){return{value:f,done:!0}}return N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(R),!t)for(var e in this)e.charAt(0)==="t"&&S.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=f)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(B,z){return T.type="throw",T.arg=t,e.next=B,z&&(e.method="next",e.arg=f),!!z}for(var u=this.tryEntries.length-1;u>=0;--u){var c=this.tryEntries[u],T=c.completion;if(c.tryLoc==="root")return n("end");if(c.tryLoc<=this.prev){var I=S.call(c,"catchLoc"),$=S.call(c,"finallyLoc");if(I&&$){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(I){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else if($){if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var u=this.tryEntries[n];if(u.tryLoc<=this.prev&&S.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var c=u;break}}c&&(t==="break"||t==="continue")&&c.tryLoc<=e&&e<=c.finallyLoc&&(c=null);var T=c?c.completion:{};return T.type=t,T.arg=e,c?(this.method="next",this.next=c.finallyLoc,b):this.complete(T)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var u=n.completion;if(u.type==="throw"){var c=u.arg;R(n)}return c}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},this.method==="next"&&(this.arg=f),b}},i}(l.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})(ht);var me={},We={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.browserSupportsPolyfills=U.compareTwoStringsUsingDiceCoefficient=U.commandToRegExp=U.concatTranscripts=U.debounce=void 0;var pt=function(r,i,p){var S;return function(){var A=this,f=arguments,C=function(){S=null,p||r.apply(A,f)},_=p&&!S;clearTimeout(S),S=setTimeout(C,i),_&&r.apply(A,f)}};U.debounce=pt;var gt=function(){for(var r=arguments.length,i=new Array(r),p=0;p<r;p++)i[p]=arguments[p];return i.map(function(S){return S.trim()}).join(" ").trim()};U.concatTranscripts=gt;var vt=/\s*\((.*?)\)\s*/g,dt=/(\(\?:[^)]+\))\?/g,mt=/(\(\?)?:\w+/g,yt=/\*/g,bt=/[-{}[\]+?.,\\^$|#]/g,wt=function(r){return r instanceof RegExp?new RegExp(r.source,"i"):(r=r.replace(bt,"\\$&").replace(vt,"(?:$1)?").replace(mt,function(i,p){return p?i:"([^\\s]+)"}).replace(yt,"(.*?)").replace(dt,"\\s*$1?\\s*"),new RegExp("^"+r+"$","i"))};U.commandToRegExp=wt;var St=function(r,i){if(r=r.replace(/\s+/g,"").toLowerCase(),i=i.replace(/\s+/g,"").toLowerCase(),!r.length&&!i.length)return 1;if(!r.length||!i.length)return 0;if(r===i)return 1;if(r.length===1&&i.length===1||r.length<2||i.length<2)return 0;for(var p=new Map,S=0;S<r.length-1;S++){var A=r.substring(S,S+2),f=p.has(A)?p.get(A)+1:1;p.set(A,f)}for(var C=0,_=0;_<i.length-1;_++){var j=i.substring(_,_+2),P=p.has(j)?p.get(j):0;P>0&&(p.set(j,P-1),C++)}return 2*C/(r.length+i.length-2)};U.compareTwoStringsUsingDiceCoefficient=St;var _t=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};U.browserSupportsPolyfills=_t;var ae={},re={};Object.defineProperty(re,"__esModule",{value:!0});re.APPEND_TRANSCRIPT=re.CLEAR_TRANSCRIPT=void 0;var Tt="CLEAR_TRANSCRIPT";re.CLEAR_TRANSCRIPT=Tt;var Rt="APPEND_TRANSCRIPT";re.APPEND_TRANSCRIPT=Rt;Object.defineProperty(ae,"__esModule",{value:!0});ae.appendTranscript=ae.clearTranscript=void 0;var Be=re,Ct=function(){return{type:Be.CLEAR_TRANSCRIPT}};ae.clearTranscript=Ct;var Lt=function(r,i){return{type:Be.APPEND_TRANSCRIPT,payload:{interimTranscript:r,finalTranscript:i}}};ae.appendTranscript=Lt;var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.transcriptReducer=void 0;var Ge=re,At=U,kt=function(r,i){switch(i.type){case Ge.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case Ge.APPEND_TRANSCRIPT:return{interimTranscript:i.payload.interimTranscript,finalTranscript:(0,At.concatTranscripts)(r.finalTranscript,i.payload.finalTranscript)};default:throw new Error}};pe.transcriptReducer=kt;var Ue={},ye={};(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var r=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};l.default=r})(ye);var be={};(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.isNative=void 0;var r=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),i=function(A){return A===r};l.isNative=i;var p=r;l.default=p})(be);(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var r=S(ye),i=U,p=be;function S(g){return g&&g.__esModule?g:{default:g}}function A(g,h,a,s,w,d,m){try{var b=g[d](m),E=b.value}catch(M){a(M);return}b.done?h(E):Promise.resolve(E).then(s,w)}function f(g){return function(){var h=this,a=arguments;return new Promise(function(s,w){var d=g.apply(h,a);function m(E){A(d,s,w,m,b,"next",E)}function b(E){A(d,s,w,m,b,"throw",E)}m(void 0)})}}function C(g,h){if(!(g instanceof h))throw new TypeError("Cannot call a class as a function")}function _(g,h){for(var a=0;a<h.length;a++){var s=h[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}function j(g,h,a){return h&&_(g.prototype,h),a&&_(g,a),g}var P=function(){function g(h){C(this,g),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(h),(0,r.default)()&&(this.updateFinalTranscript=(0,i.debounce)(this.updateFinalTranscript,250,!0))}return j(g,[{key:"setSpeechRecognition",value:function(a){var s=!!a&&((0,p.isNative)(a)||(0,i.browserSupportsPolyfills)());s&&(this.disableRecognition(),this.recognition=new a,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(s)}},{key:"subscribe",value:function(a,s){this.subscribers[a]=s}},{key:"unsubscribe",value:function(a){delete this.subscribers[a]}},{key:"emitListeningChange",value:function(a){var s=this;this.listening=a,Object.keys(this.subscribers).forEach(function(w){var d=s.subscribers[w].onListeningChange;d(a)})}},{key:"emitMicrophoneAvailabilityChange",value:function(a){var s=this;this.isMicrophoneAvailable=a,Object.keys(this.subscribers).forEach(function(w){var d=s.subscribers[w].onMicrophoneAvailabilityChange;d(a)})}},{key:"emitTranscriptChange",value:function(a,s){var w=this;Object.keys(this.subscribers).forEach(function(d){var m=w.subscribers[d].onTranscriptChange;m(a,s)})}},{key:"emitClearTranscript",value:function(){var a=this;Object.keys(this.subscribers).forEach(function(s){var w=a.subscribers[s].onClearTranscript;w()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(a){var s=this;Object.keys(this.subscribers).forEach(function(w){var d=s.subscribers[w],m=d.onBrowserSupportsSpeechRecognitionChange,b=d.onBrowserSupportsContinuousListeningChange;m(a),b(a)})}},{key:"disconnect",value:function(a){if(this.recognition&&this.listening)switch(a){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(a){a&&a.error&&a.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(a){var s=a.results,w=a.resultIndex,d=w===void 0?s.length-1:w;this.interimTranscript="",this.finalTranscript="";for(var m=d;m<s.length;++m)s[m].isFinal&&(!(0,r.default)()||s[m][0].confidence>0)?this.updateFinalTranscript(s[m][0].transcript):this.interimTranscript=(0,i.concatTranscripts)(this.interimTranscript,s[m][0].transcript);var b=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(b=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,b||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(a){this.finalTranscript=(0,i.concatTranscripts)(this.finalTranscript,a)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var h=f(regeneratorRuntime.mark(function s(){var w,d,m,b,E,M,O=arguments;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(w=O.length>0&&O[0]!==void 0?O[0]:{},d=w.continuous,m=d===void 0?!1:d,b=w.language,this.recognition){k.next=3;break}return k.abrupt("return");case 3:if(E=m!==this.recognition.continuous,M=b&&b!==this.recognition.lang,!(E||M)){k.next=11;break}if(!this.listening){k.next=9;break}return k.next=9,this.stopListening();case 9:this.recognition.continuous=E?m:this.recognition.continuous,this.recognition.lang=M?b:this.recognition.lang;case 11:if(this.listening){k.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),k.prev=13,k.next=16,this.start();case 16:this.emitListeningChange(!0),k.next=22;break;case 19:k.prev=19,k.t0=k.catch(13),k.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return k.stop()}},s,this,[[13,19]])}));function a(){return h.apply(this,arguments)}return a}()},{key:"abortListening",value:function(){var h=f(regeneratorRuntime.mark(function s(){var w=this;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),m.next=4,new Promise(function(b){w.onStopListening=b});case 4:case"end":return m.stop()}},s,this)}));function a(){return h.apply(this,arguments)}return a}()},{key:"stopListening",value:function(){var h=f(regeneratorRuntime.mark(function s(){var w=this;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),m.next=4,new Promise(function(b){w.onStopListening=b});case 4:case"end":return m.stop()}},s,this)}));function a(){return h.apply(this,arguments)}return a}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var h=f(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(this.recognition&&!this.listening)){d.next=4;break}return d.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return d.stop()}},s,this)}));function a(){return h.apply(this,arguments)}return a}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),g}();l.default=P})(Ue);(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.useSpeechRecognition=void 0;var r=x,i=U,p=ae,S=pe,A=_(Ue),f=_(ye),C=_(be);function _(o){return o&&o.__esModule?o:{default:o}}function j(o,y,v,R,N,L,D){try{var t=o[L](D),e=t.value}catch(n){v(n);return}t.done?y(e):Promise.resolve(e).then(R,N)}function P(o){return function(){var y=this,v=arguments;return new Promise(function(R,N){var L=o.apply(y,v);function D(e){j(L,R,N,D,t,"next",e)}function t(e){j(L,R,N,D,t,"throw",e)}D(void 0)})}}function g(o){return s(o)||a(o)||b(o)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(o){if(typeof Symbol<"u"&&Symbol.iterator in Object(o))return Array.from(o)}function s(o){if(Array.isArray(o))return E(o)}function w(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?w=function(v){return typeof v}:w=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},w(o)}function d(o,y){return O(o)||M(o,y)||b(o,y)||m()}function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(o,y){if(o){if(typeof o=="string")return E(o,y);var v=Object.prototype.toString.call(o).slice(8,-1);if(v==="Object"&&o.constructor&&(v=o.constructor.name),v==="Map"||v==="Set")return Array.from(o);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return E(o,y)}}function E(o,y){(y==null||y>o.length)&&(y=o.length);for(var v=0,R=new Array(y);v<y;v++)R[v]=o[v];return R}function M(o,y){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(o)))){var v=[],R=!0,N=!1,L=void 0;try{for(var D=o[Symbol.iterator](),t;!(R=(t=D.next()).done)&&(v.push(t.value),!(y&&v.length===y));R=!0);}catch(e){N=!0,L=e}finally{try{!R&&D.return!=null&&D.return()}finally{if(N)throw L}}return v}}function O(o){if(Array.isArray(o))return o}var q=!!C.default,k=q&&!(0,f.default)(),W,X=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=y.transcribing,R=v===void 0?!0:v,N=y.clearTranscriptOnListen,L=N===void 0?!0:N,D=y.commands,t=D===void 0?[]:D,e=(0,r.useState)(Y.getRecognitionManager()),n=d(e,1),u=n[0],c=(0,r.useState)(q),T=d(c,2),I=T[0],$=T[1],B=(0,r.useState)(k),z=d(B,2),oe=z[0],ee=z[1],Q=(0,r.useReducer)(S.transcriptReducer,{interimTranscript:u.interimTranscript,finalTranscript:""}),we=d(Q,2),Se=we[0],_e=Se.interimTranscript,Te=Se.finalTranscript,Re=we[1],qe=(0,r.useState)(u.listening),Ce=d(qe,2),He=Ce[0],Ye=Ce[1],Je=(0,r.useState)(u.isMicrophoneAvailable),Le=d(Je,2),Ke=Le[0],Qe=Le[1],Ae=(0,r.useRef)(t);Ae.current=t;var ke=function(){Re((0,p.clearTranscript)())},se=(0,r.useCallback)(function(){u.resetTranscript(),ke()},[u]),Ve=function(F,K,te){var Z=w(F)==="object"?F.toString():F,ce=Z.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),ue=(0,i.compareTwoStringsUsingDiceCoefficient)(ce,K);return ue>=te?{command:F,commandWithoutSpecials:ce,howSimilar:ue,isFuzzyMatch:!0}:null},Xe=function(F,K){var te=(0,i.commandToRegExp)(F),Z=te.exec(K);return Z?{command:F,parameters:Z.slice(1)}:null},Pe=(0,r.useCallback)(function(J,F){Ae.current.forEach(function(K){var te=K.command,Z=K.callback,ce=K.matchInterim,ue=ce===void 0?!1:ce,Oe=K.isFuzzyMatch,Ne=Oe===void 0?!1:Oe,De=K.fuzzyMatchingThreshold,xe=De===void 0?.8:De,ze=K.bestMatchOnly,et=ze===void 0?!1:ze,le=!F&&ue?J.trim():F.trim(),tt=Array.isArray(te)?te:[te],fe=tt.map(function(H){return Ne?Ve(H,le,xe):Xe(H,le)}).filter(function(H){return H});if(Ne&&et&&fe.length>=2){fe.sort(function(H,ve){return ve.howSimilar-H.howSimilar});var ge=fe[0],nt=ge.command,rt=ge.commandWithoutSpecials,it=ge.howSimilar;Z(rt,le,it,{command:nt,resetTranscript:se})}else fe.forEach(function(H){if(H.isFuzzyMatch){var ve=H.command,at=H.commandWithoutSpecials,ot=H.howSimilar;Z(at,le,ot,{command:ve,resetTranscript:se})}else{var st=H.command,ct=H.parameters;Z.apply(void 0,g(ct).concat([{command:st,resetTranscript:se}]))}})})},[se]),Ee=(0,r.useCallback)(function(J,F){R&&Re((0,p.appendTranscript)(J,F)),Pe(J,F)},[Pe,R]),Me=(0,r.useCallback)(function(){L&&ke()},[L]);(0,r.useEffect)(function(){var J=Y.counter;Y.counter+=1;var F={onListeningChange:Ye,onMicrophoneAvailabilityChange:Qe,onTranscriptChange:Ee,onClearTranscript:Me,onBrowserSupportsSpeechRecognitionChange:$,onBrowserSupportsContinuousListeningChange:ee};return u.subscribe(J,F),function(){u.unsubscribe(J)}},[R,L,u,Ee,Me]);var Ze=(0,i.concatTranscripts)(Te,_e);return{transcript:Ze,interimTranscript:_e,finalTranscript:Te,listening:He,isMicrophoneAvailable:Ke,resetTranscript:se,browserSupportsSpeechRecognition:I,browserSupportsContinuousListening:oe}};l.useSpeechRecognition=X;var Y={counter:0,applyPolyfill:function(y){W?W.setSpeechRecognition(y):W=new A.default(y);var v=!!y&&(0,i.browserSupportsPolyfills)();q=v,k=v},removePolyfill:function(){W?W.setSpeechRecognition(C.default):W=new A.default(C.default),q=!!C.default,k=q&&!(0,f.default)()},getRecognitionManager:function(){return W||(W=new A.default(C.default)),W},getRecognition:function(){var y=Y.getRecognitionManager();return y.getRecognition()},startListening:function(){var o=P(regeneratorRuntime.mark(function v(){var R,N,L,D,t=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return R=t.length>0&&t[0]!==void 0?t[0]:{},N=R.continuous,L=R.language,D=Y.getRecognitionManager(),n.next=4,D.startListening({continuous:N,language:L});case 4:case"end":return n.stop()}},v)}));function y(){return o.apply(this,arguments)}return y}(),stopListening:function(){var o=P(regeneratorRuntime.mark(function v(){var R;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return R=Y.getRecognitionManager(),L.next=3,R.stopListening();case 3:case"end":return L.stop()}},v)}));function y(){return o.apply(this,arguments)}return y}(),abortListening:function(){var o=P(regeneratorRuntime.mark(function v(){var R;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return R=Y.getRecognitionManager(),L.next=3,R.abortListening();case 3:case"end":return L.stop()}},v)}));function y(){return o.apply(this,arguments)}return y}(),browserSupportsSpeechRecognition:function(){return q},browserSupportsContinuousListening:function(){return k}},ie=Y;l.default=ie})(We);(function(l){function r(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(_){return typeof _}:r=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},r(f)}Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"useSpeechRecognition",{enumerable:!0,get:function(){return i.useSpeechRecognition}}),l.default=void 0;var i=S(We);function p(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return p=function(){return f},f}function S(f){if(f&&f.__esModule)return f;if(f===null||r(f)!=="object"&&typeof f!="function")return{default:f};var C=p();if(C&&C.has(f))return C.get(f);var _={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in f)if(Object.prototype.hasOwnProperty.call(f,P)){var g=j?Object.getOwnPropertyDescriptor(f,P):null;g&&(g.get||g.set)?Object.defineProperty(_,P,g):_[P]=f[P]}return _.default=f,C&&C.set(f,_),_}var A=i.default;l.default=A})(me);const je=ut(me),Pt="_page_4uz0g_1",Et="_container_4uz0g_8",Mt="_controls_4uz0g_17",Ot="_controls_status_4uz0g_25",Nt="_controls_buttons_4uz0g_49",Dt="_words_container_4uz0g_56",zt="_words_4uz0g_56",It="_default_text_4uz0g_74",$t="_snack_4uz0g_78",V={page:Pt,container:Et,controls:Mt,controls_status:Ot,controls_buttons:Nt,words_container:Dt,words:zt,default_text:It,snack:$t},Gt="_success_btn_1265h_1",jt="_danger_btn_1265h_1",Ft="_default_btn_1265h_1",Wt="_active_1265h_30",Bt="_select_1265h_38",de={success_btn:Gt,danger_btn:jt,default_btn:Ft,active:Wt,select:Bt},he=({text:l,btnStyle:r,isActive:i,onClick:p})=>{const S=`${de[r]} ${i?de.active:""}`;return G("button",{className:S,type:"button",onClick:()=>p==null?void 0:p(),children:l})},Ut=({onChange:l,isDisable:r,options:i})=>G("select",{name:"language",id:"language",className:de.select,onChange:p=>l==null?void 0:l(p.target.value),disabled:r,children:i.map(({value:p,name:S})=>G("option",{value:p,children:S},p))}),Fe=[{value:"en-US",name:"English(US)"},{value:"zh-CN",name:"中文"},{value:"ja",name:"日本語"}],Yt=()=>{const l=x.useRef([]),r=x.useRef(null),[i,p]=x.useState([]),[S,A]=x.useState(!1),[f,C]=x.useState(!1),[_,j]=x.useState(Fe[0].value),{enqueueSnackbar:P}=lt(),{resetTranscript:g,listening:h,finalTranscript:a,interimTranscript:s,browserSupportsSpeechRecognition:w}=me.useSpeechRecognition();if(!w)return G("p",{children:"Your browser does not support speech recognition software! Try Chrome desktop, maybe?"});const d=()=>{A(!0),je.startListening({continuous:!0,language:_})},m=()=>{A(!1),je.stopListening()},b=()=>{p([]),g(),C(!1)},E=()=>{const M=i.map(O=>O.text).join(`
`);navigator.clipboard.writeText(M),P("Copied!",{className:V.snack,autoHideDuration:2e3,anchorOrigin:{horizontal:"right",vertical:"bottom"},variant:"success"})};return x.useEffect(()=>{if((s||a)&&C(!0),s){l.current.push(s);const{scrollHeight:M}=r.current;r.current.scrollTop=M}if(!s){const M=l.current.length-1,O=l.current[M];if(!O)return;p(q=>[...q,{id:Ie(),text:O}]),l.current=[]}},[s]),G("section",{className:V.page,children:ne("div",{className:V.container,children:[ne("div",{className:V.controls,children:[ne("div",{className:V.controls_status,children:[ne("p",{children:["Microphone",G("span",{children:h?"on":"off"})]}),ne("p",{children:["Language",G(Ut,{onChange:j,isDisable:S,options:Fe})]})]}),ne("div",{className:V.controls_buttons,children:[G(he,{btnStyle:"default_btn",text:"Start",isActive:S,onClick:d}),G(he,{btnStyle:"default_btn",text:"Stop",isActive:!S,onClick:m}),G(he,{btnStyle:"success_btn",text:"Copy",onClick:E}),G(he,{btnStyle:"danger_btn",text:"Reset",onClick:b})]})]}),G("div",{className:V.words_container,ref:r,children:G("div",{className:V.words,children:f?ne(ft,{children:[i.map(({id:M,text:O})=>G("p",{children:O},M)),G("p",{children:s},Ie())]}):G("p",{className:V.default_text,children:"尚無內容"})})})]})})};export{Yt as default};
